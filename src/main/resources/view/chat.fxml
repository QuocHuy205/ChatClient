<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="vku.chatapp.client.controller.ChatController"
      styleClass="chat-view" spacing="0" VBox.vgrow="ALWAYS">

    <!-- Chat Header -->
    <HBox styleClass="chat-header" alignment="CENTER_LEFT" spacing="15">
        <padding>
            <Insets top="12" right="15" bottom="12" left="15"/>
        </padding>

        <!-- Avatar -->
        <Region styleClass="avatar-circle" prefWidth="40" prefHeight="40"/>

        <!-- Friend Info -->
        <VBox spacing="2" HBox.hgrow="ALWAYS">
            <Label fx:id="chatTitleLabel" text="Select a conversation" styleClass="chat-title">
                <font>
                    <Font name="Segoe UI Semibold" size="15"/>
                </font>
            </Label>
            <Label fx:id="chatStatusLabel" text="" styleClass="chat-subtitle">
                <font>
                    <Font size="11"/>
                </font>
            </Label>
        </VBox>

        <!-- Action Buttons -->
        <HBox spacing="10">
            <Button text="ðŸ“ž" styleClass="icon-button-large">
                <tooltip>
                    <Tooltip text="Voice Call"/>
                </tooltip>
            </Button>
            <Button text="ðŸ“¹" styleClass="icon-button-large">
                <tooltip>
                    <Tooltip text="Video Call"/>
                </tooltip>
            </Button>
            <Button text="â„¹" styleClass="icon-button-large">
                <tooltip>
                    <Tooltip text="Info"/>
                </tooltip>
            </Button>
        </HBox>
    </HBox>

    <Separator/>

    <!-- Messages Area -->
    <ScrollPane fx:id="messagesScrollPane"
                VBox.vgrow="ALWAYS"
                fitToWidth="true"
                styleClass="messages-scroll">

        <VBox fx:id="messagesContainer"
              styleClass="messages-container"
              spacing="10">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <!-- Messages will be added here dynamically -->
            <Label text="Start a conversation"
                   styleClass="placeholder-label"
                   alignment="CENTER"
                   maxWidth="Infinity"/>
        </VBox>
    </ScrollPane>

    <Separator/>

    <!-- Message Input Area -->
    <HBox styleClass="message-input-area" alignment="CENTER" spacing="10">
        <padding>
            <Insets top="12" right="15" bottom="12" left="15"/>
        </padding>

        <!-- Attach Button -->
        <Button fx:id="attachButton"
                text="ðŸ“Ž"
                styleClass="icon-button-large"
                onAction="#handleAttachFile">
            <tooltip>
                <Tooltip text="Attach File"/>
            </tooltip>
        </Button>

        <!-- Emoji Button -->
        <Button fx:id="emojiButton"
                text="ðŸ˜Š"
                styleClass="icon-button-large"
                onAction="#handleEmoji">
            <tooltip>
                <Tooltip text="Insert Emoji"/>
            </tooltip>
        </Button>

        <!-- Message Input -->
        <TextArea fx:id="messageInput"
                  promptText="Type a message..."
                  wrapText="true"
                  prefRowCount="1"
                  styleClass="message-input"
                  HBox.hgrow="ALWAYS"/>

        <!-- Send Button -->
        <Button fx:id="sendButton"
                text="Send"
                styleClass="send-button"
                onAction="#handleSendMessage"
                defaultButton="true">
            <font>
                <Font name="Segoe UI Semibold" size="13"/>
            </font>
        </Button>
    </HBox>

</VBox>